<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI 프롬프트 설계 마법사</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons CDN -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700&display=swap');
        
        body {
            font-family: 'Pretendard', sans-serif;
            background-color: #f8fafc;
            color: #1e293b;
            overflow-x: hidden;
        }

        .wizard-step {
            display: none;
            animation: fadeIn 0.4s ease-out forwards;
            width: 100%;
        }

        .wizard-step.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 텍스트에리어 스타일 - 내부 여백(Padding) 적용 및 배경색 흰색 */
        .textarea-base {
            display: block !important;
            width: 100% !important;
            box-sizing: border-box !important;
            padding: 0.875rem 1rem !important; 
            @apply rounded-xl border border-slate-200 bg-white outline-none focus:ring-4 focus:ring-blue-500/10 focus:border-blue-500 transition-all text-lg leading-relaxed resize-none shadow-sm;
        }

        .progress-dot {
            @apply w-3 h-3 rounded-full transition-all duration-300;
        }

        .progress-dot.active {
            @apply bg-blue-600 ring-4 ring-blue-100;
        }

        .progress-dot.completed {
            @apply bg-blue-600;
        }

        .progress-dot.pending {
            @apply bg-slate-200;
        }

        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }

        /* 커스텀 모달 스타일 */
        #confirmModal {
            display: none;
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(4px);
        }
        #confirmModal.active {
            display: flex;
        }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Custom Confirmation Modal (Reset Only) -->
    <div id="confirmModal" class="fixed inset-0 z-[100] items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-2xl max-w-sm w-full p-6 transform transition-all">
            <div class="flex items-center gap-3 mb-4 text-red-600">
                <i data-lucide="alert-triangle" class="w-6 h-6"></i>
                <h3 class="text-xl font-bold">내용 초기화</h3>
            </div>
            <p class="text-slate-600 mb-6 leading-relaxed">
                작성 중인 모든 내용이 삭제되고 처음 단계로 돌아갑니다. 정말 초기화하시겠습니까?
            </p>
            <div class="flex gap-3">
                <button onclick="closeModal()" class="flex-1 px-4 py-3 bg-slate-100 hover:bg-slate-200 text-slate-700 font-bold rounded-xl transition-all">
                    취소
                </button>
                <button onclick="resetWizard()" class="flex-1 px-4 py-3 bg-red-600 hover:bg-red-700 text-white font-bold rounded-xl transition-all">
                    초기화 실행
                </button>
            </div>
        </div>
    </div>

    <!-- Header & Progress Bar -->
    <header class="bg-white border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-4xl mx-auto px-6 py-4">
            <div class="flex items-center justify-between mb-4">
                <div class="flex items-center gap-2">
                    <!-- 마법봉 아이콘: 시각 효과 유지 -->
                    <div class="bg-blue-600 p-1.5 rounded-lg shadow-lg shadow-blue-100">
                        <i data-lucide="wand-2" class="text-white w-5 h-5"></i>
                    </div>
                    <span class="font-bold text-slate-800 tracking-tight">Prompt Design Wizard</span>
                </div>
                <div class="flex items-center gap-3">
                    <div class="text-sm font-medium text-slate-400" id="stepIndicator">Step 1 of 6</div>
                    <!-- 초기화 전용 버튼 -->
                    <button onclick="showModal()" class="text-xs bg-slate-100 hover:bg-red-50 hover:text-red-600 px-2 py-1 rounded-md text-slate-500 font-bold transition-all flex items-center gap-1">
                        <i data-lucide="refresh-ccw" class="w-3 h-3"></i>
                        초기화
                    </button>
                </div>
            </div>
            <!-- Progress Track -->
            <div class="flex items-center justify-between gap-2 relative">
                <div class="absolute h-0.5 bg-slate-100 w-full top-1/2 -translate-y-1/2 z-0"></div>
                <div id="progressBar" class="absolute h-0.5 bg-blue-600 transition-all duration-500 top-1/2 -translate-y-1/2 z-0" style="width: 0%"></div>
                
                <div class="progress-dot active z-10" data-step="1"></div>
                <div class="progress-dot pending z-10" data-step="2"></div>
                <div class="progress-dot pending z-10" data-step="3"></div>
                <div class="progress-dot pending z-10" data-step="4"></div>
                <div class="progress-dot pending z-10" data-step="5"></div>
                <div class="progress-dot pending z-10" data-step="6"></div>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-grow max-w-4xl mx-auto w-full px-6 py-12">
        <form id="wizardForm" class="w-full">
            
            <!-- Step 1: Persona & Recency -->
            <div class="wizard-step active w-full" id="step1">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-900 mb-2">1. 역할 및 정의</h2>
                    <p class="text-slate-500">AI가 어떠한 전문가적 관점에서 문제를 해결해야 하는지 정의합니다.</p>
                </div>
                <div class="space-y-10 w-full">
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2">질문: AI에게 부여할 구체적인 전문가 역할(페르소나)은 무엇인가요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Expert Persona (e.g., Senior Marketer)</p>
                        <textarea id="persona" class="textarea-base h-48" placeholder="예: 시니어 웹 개발자, 비즈니스 전략가 등"></textarea>
                    </div>
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2 text-blue-600">질문: 정보의 최신성 제어 및 최신 데이터 반영 기준을 어떻게 설정하실 건가요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Recency Control & Data Cutoff Management</p>
                        <textarea id="recencyControl" class="textarea-base h-48 border-blue-100" placeholder=""></textarea>
                    </div>
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2">질문: 답변 시 유지해야 할 어조와 매너는 무엇인가요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Tone and Manner (e.g., Formal, Logical)</p>
                        <textarea id="tone" class="textarea-base h-48" placeholder="예: 논리적이고 차분한 어조"></textarea>
                    </div>
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2">질문: 이 결과물을 받아볼 최종 대상은 누구인가요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Target Audience</p>
                        <textarea id="audience" class="textarea-base h-48" placeholder="예: 초보자, 일반인, 경영진 등"></textarea>
                    </div>
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2">질문: 대상의 전문 지식 수준은 어느 정도인가요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Level of Expertise</p>
                        <textarea id="expertise" class="textarea-base h-48" placeholder="예: 입문자 수준"></textarea>
                    </div>
                </div>
            </div>

            <!-- Step 2: Task -->
            <div class="wizard-step w-full" id="step2">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-900 mb-2">2. 작업 목표 및 행동 정의</h2>
                    <p class="text-slate-500">AI가 수행해야 할 핵심 업무와 단계별 행동을 상세화합니다.</p>
                </div>
                <div class="space-y-10 w-full">
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2">질문: AI가 수행해야 할 가장 핵심적인 동사적 행동은 무엇인가요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Most critical verbal action</p>
                        <textarea id="coreAction" class="textarea-base h-60" placeholder="수행해야 할 핵심 작업을 동사 위주로 상세히 입력하세요."></textarea>
                    </div>
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2">질문: 이 작업을 통해 달성하고자 하는 궁극적인 목적이나 KPI는 무엇인가요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Ultimate Goal or KPI</p>
                        <textarea id="kpi" class="textarea-base h-48" placeholder="성과 지표를 입력하세요."></textarea>
                    </div>
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2">질문: 작업을 수행하기 위해 거쳐야 할 논리적인 단계가 있다면 무엇인가요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Logical steps required</p>
                        <textarea id="logicalSteps" class="textarea-base h-48" placeholder="1단계, 2단계 등 절차를 입력하세요."></textarea>
                    </div>
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2">질문: 각 단계에서 특히 주의 깊게 검토해야 할 요소는 무엇인가요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Care items to review</p>
                        <textarea id="careItems" class="textarea-base h-48" placeholder="핵심 체크 포인트를 입력하세요."></textarea>
                    </div>
                </div>
            </div>

            <!-- Step 3: Context & Few-Shot -->
            <div class="wizard-step w-full" id="step3">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-900 mb-2">3. 배경 정보 및 맥락</h2>
                    <p class="text-slate-500">품질 높은 답변을 위해 필요한 데이터와 입출력 예시를 입력합니다.</p>
                </div>
                <div class="space-y-10 w-full">
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2 text-blue-600 tracking-tight flex items-center gap-2">
                            <i data-lucide="zap" class="w-4 h-4"></i> 퓨샷(Few-Shot): 입출력 예시
                        </label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Examples for AI to follow</p>
                        <textarea id="fewShot" class="textarea-base h-64 border-blue-100 shadow-blue-50/50" placeholder="[예시 1] 입력: ..., 출력: ..."></textarea>
                    </div>
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2 text-red-600">질문: AI가 반드시 지켜야 할 제약사항 및 규칙은 무엇인가요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Mandatory Constraints or Rules</p>
                        <textarea id="mandatoryRules" class="textarea-base h-48 border-red-100" placeholder="반드시 준수해야 할 규칙을 입력하세요."></textarea>
                    </div>
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2">질문: AI가 참고해야 할 핵심 데이터나 문서의 내용은 무엇인가요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Core data or document reference</p>
                        <textarea id="referenceData" class="textarea-base h-60" placeholder="참조할 데이터 내용을 입력하세요."></textarea>
                    </div>
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2">질문: 현재 상황에서 AI가 반드시 알고 있어야 할 사전 지식이나 비즈니스 맥락은 무엇인가요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Prior knowledge or context</p>
                        <textarea id="businessContext" class="textarea-base h-60" placeholder="배경 상황을 입력하세요."></textarea>
                    </div>
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2">질문: 답변 시 반드시 피해야 할 내용이나 단어, 태도가 있나요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Avoidance contents</p>
                        <textarea id="avoidance" class="textarea-base h-48" placeholder="피해야 할 금기어를 입력하세요."></textarea>
                    </div>
                </div>
            </div>

            <!-- Step 4: Output Format & Detail -->
            <div class="wizard-step w-full" id="step4">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-900 mb-2">4. 출력 규격 및 심도/분량</h2>
                    <p class="text-slate-500">원하는 결과물의 형태와 상세도 수준을 구체적으로 지정합니다.</p>
                </div>
                <div class="space-y-10 w-full">
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2">질문: 어떤 형식으로 출력되기를 원하시나요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Desired Output Format</p>
                        <textarea id="outputFormat" class="textarea-base h-48" placeholder="예: Markdown, JSON 등"></textarea>
                    </div>
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2 text-indigo-600">질문: 답변의 심도(상세도) 수준은 어느 정도여야 하나요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Depth and Detail Level</p>
                        <textarea id="outputDepth" class="textarea-base h-48 border-indigo-100" placeholder="예: 상세 기술 가이드 등"></textarea>
                    </div>
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2 text-indigo-600">질문: 결과물의 구체적인 분량 제한이 있나요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Specific Length Guide</p>
                        <textarea id="outputLength" class="textarea-base h-48 border-indigo-100" placeholder="예: 공백 포함 1500자 이내 등"></textarea>
                    </div>
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2">질문: 결과물에 반드시 포함되어야 할 항목이나 섹션 제목은 무엇인가요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Required Items</p>
                        <textarea id="requiredSections" class="textarea-base h-48" placeholder="필수 포함 항목들을 입력하세요."></textarea>
                    </div>
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2">질문: 결과물의 언어는 무엇인가요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Output Language</p>
                        <textarea id="language" class="textarea-base h-48" placeholder="출력 언어를 입력하세요."></textarea>
                    </div>
                    <div class="w-full">
                        <label class="block font-bold text-slate-700 mb-2">질문: 시각적 스타일링이 필요한가요?</label>
                        <p class="text-xs text-slate-400 mb-3 uppercase tracking-wider">Visual Styling & Emoji</p>
                        <textarea id="visualStyling" class="textarea-base h-48" placeholder="스타일링 요구사항을 입력하세요."></textarea>
                    </div>
                </div>
            </div>

            <!-- Step 5: Advanced Strategy -->
            <div class="wizard-step w-full" id="step5">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-slate-900 mb-2">5. 사고 방식 및 고도화 옵션</h2>
                    <p class="text-slate-500">추론 전략을 선택하여 답변의 논리적 정확도를 높입니다.</p>
                </div>
                <div class="space-y-6 w-full">
                    <label class="flex items-center gap-5 p-6 bg-white border border-slate-200 rounded-2xl cursor-pointer hover:border-blue-500 transition-all w-full shadow-sm">
                        <input type="checkbox" id="useCot" class="w-6 h-6 accent-blue-600">
                        <div class="flex flex-col">
                            <span class="font-bold text-lg text-slate-800">'생각의 사슬(CoT)' 기법 적용</span>
                            <span class="text-sm text-slate-400 italic">Show step-by-step reasoning process.</span>
                        </div>
                    </label>
                    <label class="flex items-center gap-5 p-6 bg-white border border-slate-200 rounded-2xl cursor-pointer hover:border-blue-500 transition-all w-full shadow-sm">
                        <input type="checkbox" id="useTot" class="w-6 h-6 accent-blue-600">
                        <div class="flex flex-col">
                            <span class="font-bold text-lg text-slate-800">'생각의 나무(ToT)' 기법 적용</span>
                            <span class="text-sm text-slate-400 italic">Analyze multiple alternatives and pick the best.</span>
                        </div>
                    </label>
                    <label class="flex items-center gap-5 p-6 bg-white border border-slate-200 rounded-2xl cursor-pointer hover:border-blue-500 transition-all w-full shadow-sm">
                        <input type="checkbox" id="useSelfReview" class="w-6 h-6 accent-blue-600">
                        <div class="flex flex-col">
                            <span class="font-bold text-lg text-slate-800">자기 검증 단계 포함</span>
                            <span class="text-sm text-slate-400 italic">Review logical errors or factual consistency automatically.</span>
                        </div>
                    </label>
                    <label class="flex items-center gap-5 p-6 bg-white border border-slate-200 rounded-2xl cursor-pointer hover:border-blue-500 transition-all w-full shadow-sm">
                        <input type="checkbox" id="useEvidence" class="w-6 h-6 accent-blue-600">
                        <div class="flex flex-col">
                            <span class="font-bold text-lg text-slate-800">논리적 배경 및 근거 데이터 설명</span>
                            <span class="text-sm text-slate-400 italic">Provide source or logical grounds separately.</span>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Step 6: Final Review & Copy -->
            <div class="wizard-step w-full" id="step6">
                <div class="text-center py-12">
                    <div class="w-20 h-20 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-8">
                        <i data-lucide="check" class="w-10 h-10"></i>
                    </div>
                    <h2 class="text-3xl font-bold text-slate-900 mb-4">프롬프트 설계가 완료되었습니다!</h2>
                    <p class="text-slate-500 text-lg mb-8 max-w-md mx-auto">
                        모든 요구사항이 정리되었습니다. 아래 버튼을 눌러 영문으로 최적화된 최종 프롬프트를 클립보드에 복사하세요.
                    </p>
                    
                    <!-- 보강 안내 문구 추가 -->
                    <div class="bg-amber-50 border border-amber-200 rounded-2xl p-5 mb-10 max-w-lg mx-auto flex items-start gap-4 text-left">
                        <div class="mt-1">
                            <i data-lucide="help-circle" class="text-amber-600 w-6 h-6"></i>
                        </div>
                        <div>
                            <p class="font-bold text-amber-900 mb-1">결과가 만족스럽지 않으신가요?</p>
                            <p class="text-amber-700 text-sm leading-relaxed">
                                원하는 답변이 나오지 않는다면 다시 1단계로 돌아가 설문 내용을 수정하거나 보강해 보세요. 
                                <span class="font-bold">복사 후에도 입력값은 유지됩니다.</span>
                            </p>
                        </div>
                    </div>
                    
                    <button type="button" onclick="generateAndCopy()" class="w-full max-w-sm bg-blue-600 hover:bg-blue-700 text-white font-black text-xl py-6 rounded-2xl shadow-2xl shadow-blue-200 transition-all transform hover:scale-[1.02] active:scale-95 flex items-center justify-center gap-4 mx-auto">
                        <i data-lucide="copy" class="w-6 h-6"></i>
                        프롬프트 복사하기
                    </button>
                    
                    <p class="mt-8 text-sm text-slate-400 italic">복사 후 마법사는 자동으로 첫 단계로 이동합니다.</p>
                </div>
            </div>
        </form>
    </main>

    <!-- Footer Navigation -->
    <footer class="bg-white border-t border-slate-200 p-6 sticky bottom-0 z-50">
        <div class="max-w-4xl mx-auto flex justify-between">
            <button id="prevBtn" onclick="moveStep(-1)" class="px-8 py-4 text-slate-600 font-bold hover:bg-slate-50 rounded-xl flex items-center gap-2 transition-all opacity-0 pointer-events-none">
                <i data-lucide="arrow-left" class="w-5 h-5"></i>
                이전
            </button>
            <button id="nextBtn" onclick="moveStep(1)" class="px-10 py-4 bg-slate-900 text-white font-bold rounded-xl hover:bg-slate-800 flex items-center gap-2 transition-all">
                다음
                <i data-lucide="arrow-right" class="w-5 h-5"></i>
            </button>
        </div>
    </footer>

    <!-- Toast Notification -->
    <div id="toast" class="fixed top-24 left-1/2 -translate-x-1/2 bg-slate-900 text-white px-8 py-4 rounded-full opacity-0 translate-y-4 pointer-events-none transition-all duration-500 z-[200] flex items-center gap-3 shadow-xl">
        <i data-lucide="check-circle" class="text-green-400 w-5 h-5"></i>
        <span class="font-bold">프롬프트가 복사되었습니다!</span>
    </div>

    <script>
        let currentStep = 1;
        const totalSteps = 6;

        lucide.createIcons();

        // 초기화 함수: 현재 연도를 계산하여 Placeholder에 반영
        window.onload = function() {
            const currentYear = new Date().getFullYear();
            const recencyTextArea = document.getElementById('recencyControl');
            recencyTextArea.placeholder = `예: ${currentYear}년 이후의 최신 기술 동향을 실시간 검색하여 반영할 것, 최신 뉴스 자료를 기반으로 판단할 것 등`;
            updateWizardUI();
        };

        function moveStep(n) {
            currentStep += n;
            if (currentStep < 1) currentStep = 1;
            if (currentStep > totalSteps) currentStep = totalSteps;

            updateWizardUI();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function updateWizardUI() {
            document.querySelectorAll('.wizard-step').forEach((step, idx) => {
                step.classList.toggle('active', (idx + 1) === currentStep);
            });

            const progressPercent = ((currentStep - 1) / (totalSteps - 1)) * 100;
            document.getElementById('progressBar').style.width = progressPercent + '%';
            document.getElementById('stepIndicator').innerText = `Step ${currentStep} of ${totalSteps}`;

            document.querySelectorAll('.progress-dot').forEach((dot, idx) => {
                const stepNum = idx + 1;
                dot.className = 'progress-dot z-10';
                if (stepNum === currentStep) {
                    dot.classList.add('active');
                } else if (stepNum < currentStep) {
                    dot.classList.add('completed');
                } else {
                    dot.classList.add('pending');
                }
            });

            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');

            if (currentStep === 1) {
                prevBtn.classList.add('opacity-0', 'pointer-events-none');
            } else {
                prevBtn.classList.remove('opacity-0', 'pointer-events-none');
            }

            if (currentStep === totalSteps) {
                nextBtn.classList.add('hidden');
            } else {
                nextBtn.classList.remove('hidden');
                nextBtn.innerHTML = (currentStep === (totalSteps - 1) ? '완료' : '다음') + '<i data-lucide="arrow-right" class="w-5 h-5 ml-2 inline"></i>';
                lucide.createIcons();
            }
        }

        // 모달 제어 함수
        function showModal() {
            document.getElementById('confirmModal').classList.add('active');
        }

        function closeModal() {
            document.getElementById('confirmModal').classList.remove('active');
        }

        // 전체 초기화 및 첫 페이지 이동 함수
        function resetWizard() {
            closeModal();
            // 모든 폼 데이터 초기화
            document.getElementById('wizardForm').reset();
            // 상태값 초기화 후 1단계로 이동
            currentStep = 1;
            updateWizardUI();
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function generateAndCopy() {
            const getV = (id) => document.getElementById(id).value.trim() || "Not Provided";
            const getC = (id) => document.getElementById(id).checked ? "Yes, please apply." : "No, skip this.";

            // 최종 프롬프트: 영문으로 구성 및 볼드체 제거
            const finalPrompt = `# User Requirements Analysis Survey

## 1. Persona and Definition
- Expert Persona: ${getV('persona')}
- Recency Control: ${getV('recencyControl')}
- Tone and Manner: ${getV('tone')}
- Target Audience: ${getV('audience')}
- Expertise Level: ${getV('expertise')}

## 2. Task and Action Definition
- Core Verbal Action: ${getV('coreAction')}
- Ultimate Goal / KPI: ${getV('kpi')}
- Logical Steps: ${getV('logicalSteps')}
- Critical Review Elements: ${getV('careItems')}

## 3. Context and Background
- Few-Shot Examples: ${getV('fewShot')}
- Mandatory Constraints and Rules: ${getV('mandatoryRules')}
- Reference Data: ${getV('referenceData')}
- Business Context/Prior Knowledge: ${getV('businessContext')}
- Avoidance/Forbidden Terms: ${getV('avoidance')}

## 4. Output Specification
- Output Format: ${getV('outputFormat')}
- Depth and Detail Level: ${getV('outputDepth')}
- Length Constraint: ${getV('outputLength')}
- Required Sections/Items: ${getV('requiredSections')}
- Output Language: ${getV('language')}
- Visual Styling (Emoji, Bold): ${getV('visualStyling')}

## 5. Strategy and Advanced Options
- Apply Chain-of-Thought (CoT): ${getC('useCot')}
- Apply Tree of Thoughts (ToT): ${getC('useTot')}
- Include Self-Verification: ${getC('useSelfReview')}
- Explain Logical Background/Sources: ${getC('useEvidence')}

# [Prompt Auto-Execution Command]

"You are the world's best prompt engineer and execution expert. The responses provided in the 'User Requirements Analysis Survey' above are your behavioral guidelines. Strictly follow the contents of each section and perform the task immediately without further clarification questions.

### Execution Guide:
- Synchronize your identity and tone immediately according to the Persona section.
- Identify the essence of the problem and derive a solution by combining Context and Task.
- Structure your thinking process using the reasoning techniques specified in the Strategy section.
- Output only the final result cleanly according to the specifications designated in the Format section.

### Run
If you are ready, execute now based on the input data."`;

            copyToClipboard(finalPrompt);
        }

        function copyToClipboard(text) {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "-9999px";
            textArea.style.top = "0";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showToast();
                    // 복사 성공 시 내용은 그대로 유지한 채 1단계로만 이동
                    setTimeout(() => {
                        currentStep = 1;
                        updateWizardUI();
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                    }, 1500);
                }
            } catch (err) {
                console.error('Failed to copy');
            }
            
            document.body.removeChild(textArea);
        }

        function showToast() {
            const toast = document.getElementById('toast');
            toast.style.opacity = '1';
            toast.style.transform = 'translate(-50%, 0)';
            
            setTimeout(() => {
                toast.style.opacity = '0';
                toast.style.transform = 'translate(-50%, 1rem)';
            }, 3000);
        }
    </script>
</body>
</html>
